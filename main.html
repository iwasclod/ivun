<html dir="rtl">
  <head>
    <title>מחשבון היוון 3% עד גיל 67</title>
    <style>
      form {
        text-align: right;
        direction: rtl;
      }
      label {
        font-size: 32px;
	  display: inline-block;
        width: 200px;
        text-align: right;
        padding-right: 10px;
      }
      #result {
        font-size: 32px;
        padding: 20px;
        border: 1px solid lightgray;
        border-radius: 5px;
        width: 500px;
        text-align: center;
        direction: rtl;
      }
button {

  font-size: 20px;
  padding: 15px 25px;
}
input {
  font-size: 20px;
  padding: 10px 20px;
}
    </style>
  </head>
  <body>
    
    <form>
      <label for="age">הכנס תאריך לידה:</label>
      <input type="date" id="age" name="age">
	<br><br>	
	<label for="gil70">עד גיל 70 ?</label>
      <input type="checkbox" id="gil70" name="gil70">      
	<br><br>
      <button onclick="monthsUntilAge67(); return false;">חשב</button>
    </form>
    <br><br>
    <div id="result"></div>

  </body>
</html>

    <script>
      const table = {
0:0,
       3:2.985,
6:5.9478,
9:8.8885,
12:11.8072,
15:14.7042,
18:17.5795,
21:20.4334,
24:23.2659,
27:26.0774,
30:28.8678,
33:31.6375,
36:34.3864,
39:37.1149,
42:39.8229,
45:42.5108,
48:45.1786,
51:47.8266,
54:50.4547,
57:53.0632,
60:5506523,
63:58.2221,
66:60.7726,
69:63.3042,
72:65.8168,
75:68.3107,
78:70.786,
81:73.2428,
84:75.6813,
87:78.1015,
90:80.5038,
93:82.8881,
96:85.2546,
99:87.6034,
102:89.9347,
105:92.2486,
108:94.5453,
111:96.8248,
114:99.0872,
117:101.3329,
120:103.5617,
123:105.7739,
126:107.9696,
129:110.149,
132:112.312,
135:114.4589,
138:116.5898,
141:118.7048,
144:120.804,
147:122.8876,
150:124.9556,
153:127.0081,
156:129.0454,
159:131.0674,
162:133.0744,
165:135.0663,
168:137.0434,
171:139.0058,
174:140.9535,
177:142.8867,
180:144.8054,
183:146.7099,
186:148.6001,
189:150.4762,
192:152.3383,
195:154.1865,
198:156.0209,
201:157.8417,
204:159.6488,
207:161.4425,
210:163.2227,
213:164.9897,
216:166.7435,
219:168.4842,
222:170.212,
225:171.9268,
228:173.6288,
231:175.3181,
234:176.9949,
237:178.6591,
240:180.3109,
243:181.9503,
246:183.5776,
249:185.1926,
252:186.7957,
255:188.3868,
258:189.9659,
261:191.5334,
264:193.0891,
267:194.6332,
270:196.1658,
273:197.6869,
276:199.1967,
279:200.6952,
282:202.1826,
285:203.6588,
288:205.124,
291:206.5783,
294:208.0218,
297:209.4544,
300:210.8764,
303:212.2878,
306:213.6886,
309:213.079,
312:216.459,
315:217.8287,
318:219.1882,
321:220.5375,
324:221.8768,
327:223.206,
330:224.5254,
333:225.8349,
336:227.1346,
339:228.4247,
342:229.7051,
345:230.9759,
348:323.2373,
351:233.4893,
354:234.7319,
357:235.9652,
360:237.1893,
363:238.4043,
366:239.6103,
369:240.8072,
372:241.9952,
375:243.1743,
378:244.3447,
381:245.5063,
384:246.6592,
387:247.8035,
390:248.9393,
393:250.0666,
396:251.1855,
399:252.2961,
402:253.3984,
405:254.4924,
408:255.5783,
411:256.656,
414:257.7258,
417:258.7875,
420:259.8413,
423:260.8873,
426:261.9254,
429:262.9558,
432:263.9785,
435:264.9936,
438:266.0011,
441:267.0011,
444:267.9936,
447:268.9788,
450:269.9565,
453:270.927,
456:271.8902,
459:272.8463,
462:273.7952,
465:274.737,
468:275.6718,
471:276.5996,
474:277.5205,
477:278.4345,
480:279.3417,
483:280.2422,
486:281.1359,
489:282.0229,
492:282.9033,
495:283.7772,
198:284.6445,
501:285.5054,
504:286.3598,
507:287.2079,
510:288.0496,
513:288.885,
516:289.7142,
519:290.5373,
522:291.3542,
525:292.1649,
528:292.9697,
531:293.7684,
534:294.5612,
537:295.348,
540:296.129,
543:296.9042,
546:297.6735,
549:2984372,
552:299.1951,
555:299.9474,
558:300.694,
561:301.4351,
564:302.1707,
567:302.9007,
570:303.6253,
573:304.3446,
576:305.0584,
579:305.7669,
582:306.4701,
585:307.1681,
588:307.8609,
591:308.5485,
594:309.231,
597:309.9084,
600:310.5807,
603:311.248,
606:311.9103,
609:312.5677,
612:313.2202,
615:313.8678,
618:314.5105,
621:315.1485,
624:315.7817,
627:316.4102,
630:317.034,
633:317.6532,
636:318.2677,
639:318.8776,
642:319.483,
645:320.0839,
648:320.6803,
651:321.2722,
654:231.8597,
657:322.4429,
660:232.0216,
663:323.5961,
666:324.1663,
669:324.7322,
672:325.2939,
675:325.8514,
678:326.4048,
681:326.954,
684:327.4991,
687:328.0401,
690:328.5771,
693:329.1101,
696:329.6392,
699:330.1643,
702:330.6854,
705:331.2027,
708:331.3161,
711:332.2257,
714:332.7314,
717:333.2335,
720:333.7317,
723:334.2262,
726:334.7171,
729:335.2043,
732:335.6878,
735:336.1678,
738:336.6441,
741:337.1169,
744:337.5862,
747:338.052,
750:338.5143,
753:338.9731,
756:339.4285,
759:339.8806,
762:340.3292,
765:340.7745,
768:341.2165,
771:341.6552,
774:342.0906,
777:342.5227,
780:342.9517,
783:343.3774,
786:343.8,
789:344.2194,
792:344.6356,
795:345.0488,
798:345.4589,
801:345.8659,
804:346.2699,
807:346.6708,
810:347.0688,
813:347.4638,
816:347.8559,
819:348.245,
822:348.6313,
825:349.0146,
828:349.3951,
831:349.7727,
834:350.1476,
837:350.5196,
840:350.8888,
843:351.2553,
846:351.6191,
849:351.9802,
852:352.3385,
855:352.6942,
858:353.0472,
861:353.3976,
864:353.7454,
867:354.0906,
870:354.4332,
873:354.7732,
876:355.1107,
879:355.4457,
882:355.7782,
885:356.1082,
888:356.4358,
891:356.7609,
894:357.0836,
897:357.4038,
900:357.7217
      };


function monthsUntilAge67() {
  const birthdate = new Date(document.querySelector("input[name='age']").value);
   
  const gil70Checkbox = document.querySelector("input[name='gil70']");
  const today = new Date();
  const birthYear = birthdate.getFullYear();
  const birthMonth = birthdate.getMonth() - 1;
  const ageInYears = today.getFullYear() - birthYear;
  const ageInMonths = today.getMonth() - birthMonth + 12 * (today.getFullYear() - birthYear);
  const gil = gil70Checkbox.checked ? 70 : 67;  
  const monthsUntil67 = (gil - ageInYears) * 12 + birthMonth - today.getMonth();

  let keys = Object.keys(table);
  let closestValue;
  let closestKey;

  for (let i = 0; i < keys.length; i++) {
    if (monthsUntil67 <= keys[i]) {
      closestKey = keys[i];
      closestValue = table[keys[i]];
      break;
    }
  }

  let output;
  if (monthsUntil67 > 0) {
    output = "מקדם ההיוון ל-" + closestKey + " חודשים הוא " + closestValue;
  } else {
    output = "לא רלוונטי. מעל גיל 67";
  }
  document.querySelector("#result").innerHTML = output;
}
   
